:root{
  --accent:#9be41f;
  --bg:#ffffff;
  --surface:#fff;
  --ink:#0f172a;
  --muted:#71717a;
  --line:#eceff3;
  --shadow: 0 6px 18px rgba(15,23,42,.06);
}

@media (prefers-color-scheme: dark){
  :root{
    --bg:#0b0f14;
    --surface:#0f1520;
    --ink:#e6e8eb;
    --muted:#9aa1a9;
    --line:#1f2630;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
  }
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background:var(--bg);
  color:var(--ink);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Malgun Gothic, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
}

/* ===== App frame ===== */
/* App frame (mobile width, center on desktop) */

.app {
  width: 360px;              /* ✅ 기존 min(420px,100%) 대신 고정 폭 */
  max-width: 90%;            /* 화면 작은 경우 대응 */
  height: 90dvh;             /* ✅ 세로도 너무 길지 않게 */
  margin: 0 auto;
  background: var(--surface);
  display: grid;
  grid-template-rows: auto auto 1fr auto;
  position: relative;
  box-shadow: var(--shadow);
  border-radius: 16px;
  overflow: hidden;
}



/* ===== AppBar ===== */
.appbar{
  display:flex; align-items:center; justify-content:space-between;
  padding:8px 10px;
  border-bottom:1px solid var(--line);
  background:var(--surface);
  position:sticky; top:0; z-index:2;
}
.brand{ display:flex; gap:8px; align-items:center; }
.brand h1{ margin:0; font-size:15px; font-weight:800; }
.icon{
  width:30px; height:30px; border:none; background:transparent; color:var(--ink);
  display:grid; place-items:center; border-radius:8px; cursor:pointer;
  line-height:0;
}
.icon.ghost{ width:26px; height:26px; }
.icon:hover{ background:rgba(153, 231, 31, .08); }
.icon:active{ transform:translateY(1px); }

/* ===== Avatar ===== */
.avatar{
  border-radius:50%;
  display:grid;
  place-items:center;
  font-weight:800;
  background:#fff;
  color:var(--ink);
  border:1px solid var(--line);
}
.avatar.sm{ width:22px; height:22px; font-size:11px; }
.avatar.lg{ width:24px; height:24px; font-size:11px; }
.avatar::after{ content:attr(data-initial); }

/* ===== Search row ===== */
.search-row{
  padding:6px 8px;
  border-bottom:1px solid var(--line);
  background:var(--surface);
  position:sticky; top:46px; z-index:1;
}
.search{
  width:100%;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid var(--line);
  outline:none;
  background:transparent;
  color:var(--ink);
  font-size:13px;
}
.search:focus{ border-color:var(--accent); box-shadow:0 0 0 3px rgba(155,228,31,.22); }

/* ===== Chat list ===== */
.list{ overflow:auto; background:var(--surface); }

/* 촘촘한 아이템 */
.chat{
  display:flex;
  gap:6px;
  align-items:center;
  padding:2px 8px;
  border-bottom:1px solid var(--line);
  text-decoration:none;
  color:inherit;
  min-height:34px;
}
.chat:hover{ background:rgba(153, 231, 31, .04); }
.chat.pinned{ background:rgba(153, 231, 31, .03); }
.chat.muted .name{ opacity:.85; }

/* ✅ content → msg-content */
.msg-content{ flex:1; min-width:0; }

.top{ display:flex; justify-content:space-between; align-items:center; gap:8px; }
.name{
  font-weight:700;
  font-size:12px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.time{ font-size:10px; color:var(--muted); flex:0 0 auto; }
.bottom{ display:flex; justify-content:space-between; align-items:center; gap:6px; }
.preview{
  color:var(--muted);
  font-size:10px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  max-width:140px;
}
.unread .name{ font-weight:800; }
.unread .preview{ color:#213600; }

.badges{ display:flex; gap:4px; align-items:center; }
.pill{
  display:inline-grid; place-items:center;
  height:16px; min-width:16px; padding:0 6px;
  border-radius:999px; background:var(--accent); color:#0c2300;
  font-weight:800; font-size:10px;
}
.pill.pin, .pill.mute{ background:transparent; color:var(--muted); border:1px solid var(--line); }

/* ===== Bottom nav ===== */
.nav{
  display:grid; grid-template-columns:repeat(3,1fr);
  border-top:1px solid var(--line); background:var(--surface);
}
.nav-btn{
  padding:8px 4px;
  background:transparent; border:none; cursor:pointer;
  font-weight:700; color:var(--muted); font-size:12px;
}
.nav-btn.active{ color:var(--ink); border-top:2px solid var(--accent); }

/* FAB */
.fab{
  position:absolute; right:14px; bottom:64px;
  width:44px; height:44px;
  border-radius:50%; border:none; cursor:pointer;
  background:linear-gradient(180deg,#b8ff45,#9be41f);
  color:#0c2300; font-size:22px; font-weight:900;
  box-shadow:0 10px 22px rgba(155,228,31,.42);
}
.fab:active{ transform:translateY(1px); }

/* Scrollbar */
.list::-webkit-scrollbar{ width:8px; }
.list::-webkit-scrollbar-thumb{ background:#e7f8bf; border-radius:999px; }
.list::-webkit-scrollbar-track{ background:transparent; }

/* ===== 팝업 오버레이 ===== */
.messenger-overlay {
  position: fixed; inset: 0;
  background: rgba(0, 0, 0, 0.4);
  display: flex; align-items: center; justify-content: center;
  z-index: 1000;
}
.messenger-modal {
  position: relative;
  background: white;
  border-radius: 16px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.25);
  overflow: hidden;
}
.close-btn {
  position: absolute; top: 8px; right: 12px;
  border: none; background: transparent;
  font-size: 18px; cursor: pointer; color: #333; z-index: 2;
}

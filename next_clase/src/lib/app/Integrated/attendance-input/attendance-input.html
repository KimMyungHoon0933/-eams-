<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>출석 입력 | 동서울 학사</title>
  <!-- CSS 분리 -->
  <link rel="stylesheet" href="attendance-input.css" />
</head>
<body>
  <div class="layout">
    <main class="main">
      <!-- 상단 헤더 -->
      <header class="topbar">
        <div class="left">
          <div class="crumbs">출석관리 &gt; <strong>출석 입력</strong></div>
          <div class="titleRow">
            <h1 class="title">출석 입력</h1>
            <select class="classSelect" id="classSelect">
              <option>컴소과 2-1 자료구조</option>
              <option>컴소과 1-2 웹프로그래밍</option>
              <option>컴소과 3-1 운영체제</option>
            </select>
          </div>
        </div>
        <div class="right">
          <div class="todayDate" id="todayDate"></div>
        </div>
      </header>

      <!-- 본문 -->
      <section class="grid">
        <!-- 좌측 -->
        <aside class="toolCol">
          <div class="card">
            <h3>필터</h3>
            <label class="field">
              <span>상태</span>
              <select>
                <option>전체</option>
                <option>출석</option>
                <option>지각</option>
                <option>조퇴</option>
                <option>결석</option>
              </select>
            </label>
            <label class="field">
              <span>이름/학번 검색</span>
              <input type="text" placeholder="예: 20231234 / 홍길동" />
            </label>
          </div>

          <div class="card">
            <h3>메모</h3>
            <textarea id="memo" rows="6" placeholder="수업 특이사항, 과제 공지 등"></textarea>
            <div class="rightRow">
              <button class="btn ghost" type="button" id="saveMemo">임시저장</button>
            </div>
          </div>
        </aside>

        <!-- 중앙 -->
        <div class="centerPlaceholder">
          <div class="placeholderBox">중앙 출석표 컴포넌트 영역</div>
        </div>

        <!-- 우측 -->
        <aside class="infoCol">
          <div class="card">
            <h3>주차 선택</h3>
            <div class="weeks" id="weeks"></div>
          </div>

          <div class="card">
            <h3>오늘 수업정보</h3>
            <dl class="desc">
              <div><dt>강의명</dt><dd id="className">컴소과 2-1 자료구조</dd></div>
              <div><dt>담당</dt><dd>김교수</dd></div>
              <div><dt>정원/수강</dt><dd>40 / 36</dd></div>
              <div><dt>평균 출석률</dt><dd>92%</dd></div>
            </dl>
            <div class="legend">
              <span class="pill ok">출석</span>
              <span class="pill late">지각</span>
              <span class="pill leave">조퇴</span>
              <span class="pill absent">결석</span>
            </div>
          </div>

          <div class="card">
            <h3>최근 공지</h3>
            <ul class="list">
              <li>9/10: 팀프로젝트 조 편성 완료</li>
              <li>9/12: 실습실 변경 B-205</li>
              <li>9/15: 퀴즈 #2 공지</li>
            </ul>
          </div>
        </aside>
      </section>

      <!-- 하단 -->
      <footer class="bottomBar">
        <div class="leftRow"><span class="muted">자동저장 간격 30초</span></div>
        <div class="rightRow">
          <button class="btn ghost" type="button" id="revertBtn">원복</button>
          <button class="btn" type="button" id="tempSaveBtn">임시저장</button>
          <button class="btn primary" type="button" id="submitBtn">제출/저장</button>
        </div>
      </footer>
    </main>
  </div>

  <script>
    // 오늘 날짜 표시
    const todayDateEl = document.getElementById("todayDate");
    const today = new Date();
    const y = today.getFullYear();
    const m = String(today.getMonth()+1).padStart(2,"0");
    const d = String(today.getDate()).padStart(2,"0");
    todayDateEl.textContent = `오늘 ${y}-${m}-${d}`;

    // 강의명 연동
    const classSelect = document.getElementById('classSelect');
    const className = document.getElementById('className');
    classSelect.addEventListener('change',()=>{ className.textContent = classSelect.value; });

    // 버튼 이벤트
    const toast = (msg)=>alert(msg);
    document.getElementById('saveMemo').addEventListener('click',()=>toast('메모가 임시저장되었습니다.'));
    document.getElementById('revertBtn').addEventListener('click',()=>toast('마지막 저장 상태로 원복했습니다.'));
    document.getElementById('tempSaveBtn').addEventListener('click',()=>toast('임시저장 완료'));
    document.getElementById('submitBtn').addEventListener('click',()=>toast('제출/저장되었습니다.'));

    // 주차 목록 생성
    const WEEK_START = "2025-03-01";
    const WEEK_COUNT = 16;
    function addDays(date, days){
      const d = new Date(date);
      d.setDate(d.getDate() + days);
      return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
    }
    const weeksEl = document.getElementById('weeks');
    for(let i=1;i<=WEEK_COUNT;i++){
      const dateStr = addDays(WEEK_START, (i-1)*7);
      const btn = document.createElement('div');
      btn.className = 'weekItem';
      btn.innerHTML = `<span>${i}주차</span><span class="date">(${dateStr})</span>`;
      weeksEl.appendChild(btn);
    }
  </script>
</body>
</html>
